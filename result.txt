[StateSnapshot(values={'foo': 'b', 'bar': ['a', 'b']}, next=(), config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f0f34e2-f034-66b2-8002-417f6837cbda'}}, metadata={'source': 'loop', 'step': 2, 'parents': {}}, created_at='2026-01-17T02:42:37.022788+00:00', parent_config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f0f34e2-f034-66b1-8001-cfa655963159'}}, tasks=(), interrupts=()), 
StateSnapshot(values={'foo': 'a', 'bar': ['a']}, next=('node_b',), config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f0f34e2-f034-66b1-8001-cfa655963159'}}, metadata={'source': 'loop', 'step': 1, 'parents': {}}, created_at='2026-01-17T02:42:37.022788+00:00', parent_config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f0f34e2-f034-66b0-8000-c9a70d5cba80'}}, tasks=(PregelTask(id='86acddcb-beea-e140-e3f7-618f07e4a8f8', name='node_b', path=('__pregel_pull', 'node_b'), error=None, interrupts=(), state=None, result={'foo': 'b', 'bar': ['b']}),), interrupts=()), 
StateSnapshot(values={'foo': '', 'bar': []}, next=('node_a',), config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f0f34e2-f034-66b0-8000-c9a70d5cba80'}}, metadata={'source': 'loop', 'step': 0, 'parents': {}}, created_at='2026-01-17T02:42:37.022788+00:00', parent_config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f0f34e2-f00d-6297-bfff-f503a41ce5f9'}}, tasks=(PregelTask(id='290f9a4b-8336-09e1-3d1a-f8322d5b33ad', name='node_a', path=('__pregel_pull', 'node_a'), error=None, interrupts=(), state=None, result={'foo': 'a', 'bar': ['a']}),), interrupts=()), 
StateSnapshot(values={'bar': []}, next=('__start__',), config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f0f34e2-f00d-6297-bfff-f503a41ce5f9'}}, metadata={'source': 'input', 'step': -1, 'parents': {}}, created_at='2026-01-17T02:42:37.006709+00:00', parent_config=None, tasks=(PregelTask(id='8b5739e7-0aed-df75-ccc9-256fe389c5a3', name='__start__', path=('__pregel_pull', '__start__'), error=None, interrupts=(), state=None, result={'foo': '', 'bar': []}),), interrupts=())]
current all messages: 
[HumanMessage(content='Add 3 and 4.', additional_kwargs={}, response_metadata={}, id='a02506ac-d54a-4b37-bcf0-fa6b887aacb8'), 
AIMessage(content=[{'id': 'toolu_01BG1YnkPm9J8pc37e84gjgJ', 'input': {'a': 3, 'b': 4}, 'name': 'add', 'type': 'tool_use'}], additional_kwargs={}, response_metadata={'id': 'msg_01RCo4Mcrj11CmHUSfY9nSHN', 'model': 'claude-haiku-4-5-20251001', 'stop_reason': 'tool_use', 'stop_sequence': None, 'usage': {'cache_creation': {'ephemeral_1h_input_tokens': 0, 'ephemeral_5m_input_tokens': 0}, 'cache_creation_input_tokens': 0, 'cache_read_input_tokens': 0, 'input_tokens': 710, 'output_tokens': 69, 'server_tool_use': None, 'service_tier': 'standard'}, 'model_name': 'claude-haiku-4-5-20251001', 'model_provider': 'anthropic'}, id='lc_run--019bd4e8-0341-7703-8868-11de757ee538-0', tool_calls=[{'name': 'add', 'args': {'a': 3, 'b': 4}, 'id': 'toolu_01BG1YnkPm9J8pc37e84gjgJ', 'type': 'tool_call'}], invalid_tool_calls=[], usage_metadata={'input_tokens': 710, 'output_tokens': 69, 'total_tokens': 779, 'input_token_details': {'cache_read': 0, 'cache_creation': 0, 'ephemeral_5m_input_tokens': 0, 'ephemeral_1h_input_tokens': 0}})]